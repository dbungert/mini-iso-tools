name: CI

on: [push, pull_request]

jobs:
  dpkg-buildpackage:
    runs-on: ubuntu-20.04
    strategy:
      fail-fast: false
      matrix:
        image:
          # - ubuntu-daily:jammy
          - ubuntu-daily:lunar
    steps:
    - name: setup-lxd
      uses: canonical/setup-lxd
    - name: checkout
      uses: actions/checkout@v2
    - name: run
      run: lxc launch ${{ matrix.image }} u1
    - name: run
      run: lxc exec u1 -- apt install hello

    # - name: run
    #   run: >
    #     sudo
    #     ./scripts/test-in-lxd.sh ${{ matrix.image }}
    #     "dpkg-buildpackage -b -uc"
